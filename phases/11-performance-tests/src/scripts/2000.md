1. stopped discovery phase and increase partitions to 24 (batch size=50)    

     ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 925984 / ✗ 364
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 925978 / ✗ 6
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 925973 / ✗ 5

   ✓ checks.........................: 99.98%  ✓ 2777935     ✗ 375
   ✗ completed_transactions.........: 925973  1747.102902/s
time="2025-12-09T21:00:03Z" level=error msg="thresholds on metrics 'completed_transactions' have been crossed"
     data_received..................: 6.0 GB  11 MB/s
     data_sent......................: 2.6 GB  5.0 MB/s
   ✓ discovery_time.................: avg=338.19ms min=1ms      med=205ms    max=4.63s  p(90)=855ms    p(95)=1.06s
     dropped_iterations.............: 73560   138.791184/s
   ✓ e2e_time.......................: avg=1.82s    min=302ms    med=1.57s    max=9.09s  p(90)=3.24s    p(95)=3.63s
     failed_transactions............: 375     0.707541/s
     http_req_blocked...............: avg=89.28ms  min=123.94µs med=655.39µs max=2.33s  p(90)=303.17ms p(95)=401.35ms
     http_req_connecting............: avg=84.7ms   min=106.11µs med=553.62µs max=1.98s  p(90)=298.4ms  p(95)=394.22ms
   ✓ http_req_duration..............: avg=481.3ms  min=493.47µs med=358.83ms max=30.84s p(90)=1.01s    p(95)=1.29s
       { expected_response:true }...: avg=477.41ms min=1.34ms   med=358.78ms max=7.29s  p(90)=1.01s    p(95)=1.29s
     http_req_failed................: 0.01%   ✓ 375         ✗ 2777935
     http_req_receiving.............: avg=7.62ms   min=10.81µs  med=99.44µs  max=1.71s  p(90)=30.57ms  p(95)=47.46ms
     http_req_sending...............: avg=6.37ms   min=6.48µs   med=68.98µs  max=1.98s  p(90)=19.47ms  p(95)=42.34ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s     p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=467.29ms min=436.72µs med=342.48ms max=30.78s p(90)=1s       p(95)=1.28s
     http_reqs......................: 2778310 5242.046435/s
     iteration_duration.............: avg=1.84s    min=210.35ms med=1.57s    max=31.94s p(90)=3.29s    p(95)=3.7s
     iterations.....................: 926348  1747.810443/s
   ✓ quote_time.....................: avg=455.1ms  min=52ms     med=335ms    max=3s     p(90)=944ms    p(95)=1.1s
   ✓ success_rate...................: 99.95%  ✓ 925973      ✗ 375
   ✓ transfer_time..................: avg=998.8ms  min=142ms    med=915ms    max=8.08s  p(90)=1.59s    p(95)=1.84s
     vus............................: 1       min=0         max=5638
     vus_max........................: 5738    min=5000      max=5738
     === K6 TEST SUMMARY ===
{
  "test_config": {
    "target_transactions": 1000000,
    "target_tps": 2000,
    "duration": 500,
    "fsp_pairs": [
      {
        "dest": "fsp202",
        "source": "fsp201",
        "weight": 0.25
      },
      {
        "dest": "fsp204",
        "source": "fsp203",
        "weight": 0.25
      },
      {
        "dest": "fsp206",
        "source": "fsp205",
        "weight": 0.25
      },
      {
        "dest": "fsp208",
        "source": "fsp207",
        "weight": 0.25
      }
    ]
  },
  "results": {
    "completed_transactions": 925973,
    "success_rate": 99.95951845310833,
    "actual_tps": 1851.946,
    "e2e_time_p95": 3635,
    "http_req_duration_p95": 1298.6265509999996
  },
  "status": "FAILED"
}


2. notification handler batch size=100

   ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 999998 / ✗ 4
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 998889 / ✗ 1109

   ✓ checks.........................: 99.94%  ✓ 1998887     ✗ 1113
   ✓ completed_transactions.........: 998889  1931.602957/s
     data_received..................: 4.7 GB  9.1 MB/s
     data_sent......................: 2.4 GB  4.7 MB/s
   ✓ discovery_time.................: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
   ✓ e2e_time.......................: avg=1s       min=473ms    med=972ms    max=3.78s    p(90)=1.24s    p(95)=1.37s
     failed_transactions............: 1113    2.152265/s
     http_req_blocked...............: avg=1.9ms    min=127.45µs med=228.81µs max=289.13ms p(90)=1.8ms    p(95)=5.79ms
     http_req_connecting............: avg=1.01ms   min=108.13µs med=195.24µs max=164.53ms p(90)=1.3ms    p(95)=4.17ms
   ✓ http_req_duration..............: avg=515.08ms min=791.94µs med=439.91ms max=30.12s   p(90)=892.69ms p(95)=1s
       { expected_response:true }...: avg=498.79ms min=48.51ms  med=432.48ms max=3.66s    p(90)=891.93ms p(95)=1s
     http_req_failed................: 0.05%   ✓ 1113        ✗ 1998887
     http_req_receiving.............: avg=1.14ms   min=13.77µs  med=41.47µs  max=116.44ms p(90)=2.3ms    p(95)=7.73ms
     http_req_sending...............: avg=638.95µs min=6.69µs   med=25.9µs   max=191.66ms p(90)=822.75µs p(95)=2.55ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=513.3ms  min=737.42µs med=437.82ms max=30.08s   p(90)=890.45ms p(95)=1s
     http_reqs......................: 2000000 3867.502709/s
     iteration_duration.............: avg=1.03s    min=1.81ms   med=972.39ms max=30.49s   p(90)=1.24s    p(95)=1.37s
     iterations.....................: 1000002 1933.755222/s
   ✓ quote_time.....................: avg=218.01ms min=49ms     med=210ms    max=1.32s    p(90)=299ms    p(95)=321ms
   ✓ success_rate...................: 99.88%  ✓ 998889      ✗ 1113
   ✓ transfer_time..................: avg=784.42ms min=303ms    med=748ms    max=3.66s    p(90)=1s       p(95)=1.13s
     vus............................: 99      min=0         max=2818
     vus_max........................: 5000    min=5000      max=5000


=== K6 TEST SUMMARY ===
{
  "test_config": {
    "target_transactions": 1000000,
    "target_tps": 2000,
    "duration": 500,
    "fsp_pairs": [
      {
        "dest": "fsp202",
        "source": "fsp201",
        "weight": 0.25
      },
      {
        "dest": "fsp204",
        "source": "fsp203",
        "weight": 0.25
      },
      {
        "dest": "fsp206",
        "source": "fsp205",
        "weight": 0.25
      },
      {
        "dest": "fsp208",
        "source": "fsp207",
        "weight": 0.25
      }
    ]
  },
  "results": {
    "completed_transactions": 998889,
    "success_rate": 99.88870022259955,
    "actual_tps": 1997.778,
    "e2e_time_p95": 1371,
    "http_req_duration_p95": 1009.2426043499999
  },
  "status": "PASSED"
}

3. notification handler <--- NOT GOING GOOD>
    "batchSize": 200,
    "pollFrequency": 10,
    "syncConcurrency": 200,

   ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 983187 / ✗ 6
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 982017 / ✗ 1170

   ✓ checks.........................: 99.94%  ✓ 1965204     ✗ 1176
   ✓ completed_transactions.........: 982017  1944.171154/s
     data_received..................: 4.6 GB  9.1 MB/s
     data_sent......................: 2.4 GB  4.7 MB/s
   ✓ discovery_time.................: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
     dropped_iterations.............: 16808   33.276032/s
   ✓ e2e_time.......................: avg=2.65s    min=434ms    med=1.21s    max=11.52s   p(90)=6.43s    p(95)=7.92s
     failed_transactions............: 1176    2.328214/s
     http_req_blocked...............: avg=2.93ms   min=117.29µs med=225.13µs max=473.68ms p(90)=1.91ms   p(95)=7.44ms
     http_req_connecting............: avg=1.78ms   min=102.54µs med=197.16µs max=225.63ms p(90)=1.4ms    p(95)=5.18ms
   ✗ http_req_duration..............: avg=1.34s    min=357.87µs med=494.25ms max=30.1s    p(90)=4.29s    p(95)=6.25s
       { expected_response:true }...: avg=1.32s    min=48.12ms  med=491.14ms max=11.31s   p(90)=4.28s    p(95)=6.2s
     http_req_failed................: 0.05%   ✓ 1176        ✗ 1965204
     http_req_receiving.............: avg=1.49ms   min=13.26µs  med=42.17µs  max=289.59ms p(90)=4.66ms   p(95)=8.88ms
     http_req_sending...............: avg=921.12µs min=6.07µs   med=26.17µs  max=312.58ms p(90)=886.17µs p(95)=2.77ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=1.33s    min=296.39µs med=491.01ms max=30.08s   p(90)=4.29s    p(95)=6.25s
     http_reqs......................: 1966380 3892.986856/s
     iteration_duration.............: avg=2.68s    min=1.22ms   med=1.21s    max=30.78s   p(90)=6.48s    p(95)=7.94s
     iterations.....................: 983193  1946.499367/s
   ✓ quote_time.....................: avg=225.49ms min=48ms     med=214ms    max=2.54s    p(90)=310ms    p(95)=361ms
   ✓ success_rate...................: 99.88%  ✓ 982017      ✗ 1176
   ✗ transfer_time..................: avg=2.42s    min=312ms    med=966ms    max=11.31s   p(90)=6.2s     p(95)=7.69s
     vus............................: 1047    min=0         max=8000
     vus_max........................: 8000    min=5000      max=8000

4. back to notification handler 100 batch size
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 1002134 / ✗ 5
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 1000089 / ✗ 2044

   ✓ checks.........................: 99.89%  ✓ 2002223     ✗ 2049
   ✓ completed_transactions.........: 1000089 1914.551462/s
     data_received..................: 4.7 GB  9.0 MB/s
     data_sent......................: 2.4 GB  4.7 MB/s
   ✓ discovery_time.................: avg=0s       min=0s       med=0s       max=0s       p(90)=0s     p(95)=0s
   ✓ e2e_time.......................: avg=1.21s    min=462ms    med=1.05s    max=5.72s    p(90)=1.83s  p(95)=2.29s
     failed_transactions............: 2050    3.924481/s
     http_req_blocked...............: avg=2.85ms   min=126.13µs med=227.98µs max=334.57ms p(90)=2.78ms p(95)=7.83ms
     http_req_connecting............: avg=1.64ms   min=104.5µs  med=195.03µs max=209.12ms p(90)=2.05ms p(95)=5.7ms
   ✓ http_req_duration..............: avg=634.94ms min=545.75µs med=446.6ms  max=30.08s   p(90)=1.18s  p(95)=1.62s
       { expected_response:true }...: avg=605.03ms min=50.78ms  med=434.45ms max=5.47s    p(90)=1.18s  p(95)=1.61s
     http_req_failed................: 0.10%   ✓ 2049        ✗ 2002223
     http_req_receiving.............: avg=1.37ms   min=14.16µs  med=41.57µs  max=155.63ms p(90)=1.58ms p(95)=6.1ms
     http_req_sending...............: avg=1.22ms   min=5.9µs    med=25.98µs  max=190.52ms p(90)=1.3ms  p(95)=4.24ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s     p(95)=0s
     http_req_waiting...............: avg=632.34ms min=507.07µs med=443.85ms max=30.08s   p(90)=1.18s  p(95)=1.62s
     http_reqs......................: 2004272 3836.9404/s
     iteration_duration.............: avg=1.27s    min=2ms      med=1.05s    max=30.49s   p(90)=1.85s  p(95)=2.32s
     iterations.....................: 1002139 1918.475943/s
   ✓ quote_time.....................: avg=216.58ms min=51ms     med=210ms    max=1.34s    p(90)=299ms  p(95)=325ms
   ✓ success_rate...................: 99.79%  ✓ 1000089     ✗ 2050
   ✓ transfer_time..................: avg=1s       min=318ms    med=828ms    max=5.47s    p(90)=1.62s  p(95)=2.07s
     vus............................: 7       min=0         max=4414
     vus_max........................: 5000    min=5000      max=5000     

# 4. back to notification handler 100 batch size and increase partitions to 32 , ALS 16    

   ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 1000000 / ✗ 1
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 999898 / ✗ 102

   ✓ checks.........................: 99.99%  ✓ 1999898     ✗ 103
   ✓ completed_transactions.........: 999898  1995.056388/s
     data_received..................: 4.6 GB  9.2 MB/s
     data_sent......................: 2.4 GB  4.8 MB/s
   ✓ discovery_time.................: avg=0s       min=0s       med=0s       max=0s      p(90)=0s       p(95)=0s
   ✓ e2e_time.......................: avg=666.27ms min=211ms    med=655ms    max=2.81s   p(90)=833ms    p(95)=899ms
     failed_transactions............: 103     0.205512/s
     http_req_blocked...............: avg=819.71µs min=122.53µs med=220.1µs  max=1.01s   p(90)=735.19µs p(95)=2.28ms
     http_req_connecting............: avg=533.89µs min=104.64µs med=188.3µs  max=1.01s   p(90)=567.08µs p(95)=1.61ms
   ✓ http_req_duration..............: avg=333.26ms min=467.22µs med=293.57ms max=30.06s  p(90)=553.74ms p(95)=611.72ms
       { expected_response:true }...: avg=331.77ms min=46.3ms   med=293.55ms max=2.56s   p(90)=553.71ms p(95)=611.62ms
     http_req_failed................: 0.00%   ✓ 103         ✗ 1999898
     http_req_receiving.............: avg=600.29µs min=13.34µs  med=39µs     max=89.7ms  p(90)=958.91µs p(95)=2.9ms
     http_req_sending...............: avg=342.36µs min=6.14µs   med=24.92µs  max=55.11ms p(90)=318.51µs p(95)=1.07ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s      p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=332.32ms min=408.94µs med=292.01ms max=30.05s  p(90)=552.7ms  p(95)=610.68ms
     http_reqs......................: 2000001 3990.521805/s
     iteration_duration.............: avg=669.68ms min=12.27ms  med=655.39ms max=30.41s  p(90)=833.85ms p(95)=899.6ms
     iterations.....................: 1000001 1995.2619/s
   ✓ quote_time.....................: avg=199.03ms min=47ms     med=197ms    max=1.27s   p(90)=278ms    p(95)=296ms
   ✓ success_rate...................: 99.98%  ✓ 999898      ✗ 103
   ✓ transfer_time..................: avg=466.6ms  min=114ms    med=454ms    max=2.57s   p(90)=612ms    p(95)=677ms
     vus............................: 787     min=0         max=2442
     vus_max........................: 5000    min=5000      max=5000


=== K6 TEST SUMMARY ===
{
  "test_config": {
    "target_transactions": 1000000,
    "target_tps": 2000,
    "duration": 500,
    "fsp_pairs": [
      {
        "dest": "fsp202",
        "source": "fsp201",
        "weight": 0.25
      },
      {
        "dest": "fsp204",
        "source": "fsp203",
        "weight": 0.25
      },
      {
        "dest": "fsp206",
        "source": "fsp205",
        "weight": 0.25
      },
      {
        "dest": "fsp208",
        "source": "fsp207",
        "weight": 0.25
      }
    ]
  },
  "results": {
    "completed_transactions": 999898,
    "success_rate": 99.98970001029998,
    "actual_tps": 1999.796,
    "e2e_time_p95": 899,
    "http_req_duration_p95": 611.721406
  },
  "status": "PASSED"
}

5. back to notification handler 100 batch size and increase partitions to 32   , account lookup increase from 16 to 32

    ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 936002 / ✗ 393
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 935980 / ✗ 22
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 935844 / ✗ 136

   ✓ checks.........................: 99.98%  ✓ 2807826     ✗ 551
   ✗ completed_transactions.........: 935844  1765.820773/s
     data_received..................: 6.1 GB  12 MB/s
     data_sent......................: 2.7 GB  5.0 MB/s
   ✓ discovery_time.................: avg=304.37ms min=1ms      med=180ms    max=5.18s  p(90)=799ms    p(95)=1s
     dropped_iterations.............: 63628   120.058091/s
   ✓ e2e_time.......................: avg=2.06s    min=289ms    med=1.91s    max=8.83s  p(90)=3.36s    p(95)=3.71s
     failed_transactions............: 551     1.039668/s
     http_req_blocked...............: avg=79.72ms  min=123.58µs med=479.11µs max=2.4s   p(90)=291.34ms p(95)=392.32ms
     http_req_connecting............: avg=73.54ms  min=102.31µs med=411.49µs max=2.09s  p(90)=282.68ms p(95)=374.74ms
   ✓ http_req_duration..............: avg=579.55ms min=793.87µs med=375.33ms max=30.68s p(90)=1.37s    p(95)=1.89s
       { expected_response:true }...: avg=574.36ms min=1.22ms   med=375.25ms max=7.37s  p(90)=1.37s    p(95)=1.89s
     http_req_failed................: 0.01%   ✓ 551         ✗ 2807826
     http_req_receiving.............: avg=7.19ms   min=12.09µs  med=83.34µs  max=1.81s  p(90)=15.38ms  p(95)=57.79ms
     http_req_sending...............: avg=5.85ms   min=6.55µs   med=48.79µs  max=1.87s  p(90)=9.75ms   p(95)=52.84ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s     p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=566.5ms  min=738.12µs med=350.64ms max=30.67s p(90)=1.36s    p(95)=1.88s
     http_reqs......................: 2808377 5299.056729/s
     iteration_duration.............: avg=2.08s    min=30.76ms  med=1.91s    max=32.19s p(90)=3.39s    p(95)=3.79s
     iterations.....................: 936395  1766.860441/s
   ✓ quote_time.....................: avg=455.3ms  min=53ms     med=359ms    max=3.02s  p(90)=895ms    p(95)=1.08s
   ✓ success_rate...................: 99.94%  ✓ 935844      ✗ 551
   ✓ transfer_time..................: avg=1.27s    min=146ms    med=1.11s    max=7.37s  p(90)=2.2s     p(95)=2.63s
     vus............................: 4       min=0         max=5599
     vus_max........................: 5644    min=5000      max=5644

6. back to notification handler 100 batch size and increase partitions to 32   , account lookup increase from 16 to 24

    ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 944302 / ✗ 283
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 944297 / ✗ 5
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 943996 / ✗ 301

   ✓ checks.........................: 99.97%  ✓ 2832595     ✗ 589
   ✗ completed_transactions.........: 943996  1785.804902/s
     data_received..................: 6.1 GB  12 MB/s
     data_sent......................: 2.7 GB  5.1 MB/s
   ✓ discovery_time.................: avg=266.68ms min=1ms      med=139ms    max=6.73s  p(90)=742ms    p(95)=951ms
     dropped_iterations.............: 55416   104.833246/s
   ✓ e2e_time.......................: avg=1.61s    min=310ms    med=1.36s    max=14.35s p(90)=2.85s    p(95)=3.34s
     failed_transactions............: 589     1.114241/s
     http_req_blocked...............: avg=68.79ms  min=120.25µs med=506.44µs max=1.84s  p(90)=247.15ms p(95)=352.14ms
     http_req_connecting............: avg=64.65ms  min=103.79µs med=434.35µs max=1.64s  p(90)=239.15ms p(95)=344.73ms
   ✓ http_req_duration..............: avg=443.74ms min=639.88µs med=311.36ms max=30.71s p(90)=964.71ms p(95)=1.22s
       { expected_response:true }...: avg=437.63ms min=1.29ms   med=311.28ms max=12.08s p(90)=963.81ms p(95)=1.22s
     http_req_failed................: 0.02%   ✓ 589         ✗ 2832595
     http_req_receiving.............: avg=7.66ms   min=11.13µs  med=75.99µs  max=2.4s   p(90)=35.76ms  p(95)=45.59ms
     http_req_sending...............: avg=5.92ms   min=6.24µs   med=53.88µs  max=1.66s  p(90)=24.53ms  p(95)=40.13ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s     p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=430.14ms min=597.57µs med=299.56ms max=30.69s p(90)=949.88ms p(95)=1.2s
     http_reqs......................: 2833184 5359.677238/s
     iteration_duration.............: avg=1.64s    min=127.21ms med=1.36s    max=32.38s p(90)=2.89s    p(95)=3.39s
     iterations.....................: 944585  1786.919143/s
   ✓ quote_time.....................: avg=396.08ms min=51ms     med=298ms    max=3.9s   p(90)=795ms    p(95)=1s
   ✓ success_rate...................: 99.93%  ✓ 943996      ✗ 589
   ✓ transfer_time..................: avg=927.7ms  min=145ms    med=835ms    max=12.23s p(90)=1.5s     p(95)=1.74s
     vus............................: 1       min=0         max=5272
     vus_max........................: 5407    min=4991      max=5407


7. back to notification handler 100 batch size and increase partitions to 32   , account lookup increase from 16 to 20

     ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 915474 / ✗ 433
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 915464 / ✗ 10
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 915451 / ✗ 10

   ✓ checks.........................: 99.98%  ✓ 2746389     ✗ 453
   ✗ completed_transactions.........: 915451  1727.509917/s
     data_received..................: 5.9 GB  11 MB/s
     data_sent......................: 2.6 GB  4.9 MB/s
   ✓ discovery_time.................: avg=331.68ms min=1ms      med=183ms    max=6.81s  p(90)=902ms    p(95)=1.13s
     dropped_iterations.............: 84094   158.690327/s
   ✓ e2e_time.......................: avg=1.83s    min=286ms    med=1.5s     max=21.8s  p(90)=3.47s    p(95)=3.89s
     failed_transactions............: 456     0.860499/s
     http_req_blocked...............: avg=91.79ms  min=110.84µs med=418.72µs max=2.2s   p(90)=316.66ms p(95)=433.08ms
     http_req_connecting............: avg=87.37ms  min=102.83µs med=360.95µs max=1.8s   p(90)=309.3ms  p(95)=414.32ms
   ✓ http_req_duration..............: avg=490.15ms min=1.44ms   med=375.71ms max=30.99s p(90)=1s       p(95)=1.28s
       { expected_response:true }...: avg=485.48ms min=1.44ms   med=375.64ms max=19.01s p(90)=1s       p(95)=1.28s
     http_req_failed................: 0.01%   ✓ 453         ✗ 2746389
     http_req_receiving.............: avg=7.41ms   min=11.84µs  med=65.64µs  max=1.1s   p(90)=12.2ms   p(95)=67.21ms
     http_req_sending...............: avg=5.6ms    min=6.57µs   med=46.42µs  max=1.76s  p(90)=7.11ms   p(95)=61.35ms
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s     p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=477.14ms min=1.36ms   med=350.44ms max=30.82s p(90)=997.59ms p(95)=1.27s
     http_reqs......................: 2746842 5183.452523/s
     iteration_duration.............: avg=1.85s    min=125.82ms med=1.5s     max=31.58s p(90)=3.49s    p(95)=3.91s
     iterations.....................: 915907  1728.370416/s
   ✓ quote_time.....................: avg=474.59ms min=56ms     med=337ms    max=4.73s  p(90)=1s       p(95)=1.22s
   ✓ success_rate...................: 99.95%  ✓ 915451      ✗ 456
   ✓ transfer_time..................: avg=1s       min=150ms    med=889ms    max=19.2s  p(90)=1.61s    p(95)=1.91s
     vus............................: 1       min=0         max=5444
     vus_max........................: 5540    min=5000      max=5540



==============================

➜ k get deploy -n mojaloop     
NAME                                                READY   UP-TO-DATE   AVAILABLE   AGE
cl-mongodb                                          1/1     1            1           6h34m
moja-account-lookup-service                         24/24   24           24          6h27m
moja-account-lookup-service-admin                   1/1     1            1           6h27m
moja-als-msisdn-oracle                              8/8     8            8           6h27m
moja-centralledger-handler-admin-transfer           1/1     1            1           6h27m
moja-centralledger-handler-timeout                  1/1     1            1           6h27m
moja-centralledger-handler-transfer-fulfil          16/16   16           16          6h27m
moja-centralledger-handler-transfer-get             1/1     1            1           6h27m
moja-centralledger-handler-transfer-position        1/1     1            1           6h27m
moja-centralledger-handler-transfer-prepare         16/16   16           16          6h27m
moja-centralledger-service                          8/8     8            8           6h27m
moja-centralsettlement-handler-deferredsettlement   1/1     1            1           6h27m
moja-centralsettlement-handler-rules                1/1     1            1           6h27m
moja-centralsettlement-service                      1/1     1            1           6h27m
moja-handler-pos-batch                              8/8     8            8           6h27m
moja-ml-api-adapter-handler-notification            32/32   32           32          6h27m
moja-ml-api-adapter-service                         16/16   16           16          6h27m
moja-ml-testing-toolkit-frontend                    1/1     1            1           6h27m
moja-quoting-service                                16/16   16           16          6h27m
moja-quoting-service-handler                        16/16   16           16          6h27m



ssh k6

ubuntu@k6:~$ ulimit -n
1024
ubuntu@k6:~$ sysctl net.ipv4.ip_local_port_range
net.ipv4.ip_local_port_range = 32768	60999
ubuntu@k6:~$ sysctl net.core.somaxconn
net.core.somaxconn = 4096
ubuntu@k6:~$ sysctl net.ipv4.tcp_max_syn_backlog
net.ipv4.tcp_max_syn_backlog = 4096
ubuntu@k6:~$ sysctl net.ipv4.ip_local_port_range
net.ipv4.ip_local_port_range = 32768	60999

----SET BELOW
ubuntu@k6:~$ ulimit -n 65535
ubuntu@k6:~$ ulimit -n
65535
sudo vi /etc/security/limits.conf
add below towards the end 
* soft nofile 65535
* hard nofile 65535
OR below for "ubuntu" user
ubuntu soft nofile 65535
ubuntu hard nofile 65535

the create below file
$ sudo vi /etc/sysctl.d/99-k6-tuning.conf
add below 
net.core.somaxconn = 16384
net.ipv4.tcp_max_syn_backlog = 16384
net.ipv4.ip_local_port_range = 1024 65535
then 
$ sudo sysctl --system


in k6 script:
  noConnectionReuse: false

    preAllocatedVUs: 1000,
    maxVUs: 6000,

   ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 993626 / ✗ 160
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 993623 / ✗ 3
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 993308 / ✗ 315

   ✓ checks.........................: 99.98%  ✓ 2980557     ✗ 478
   ✓ completed_transactions.........: 993308  1875.00617/s
     data_received..................: 6.5 GB  12 MB/s
     data_sent......................: 2.8 GB  5.2 MB/s
   ✓ discovery_time.................: avg=62.18ms  min=1ms      med=27ms     max=6.19s    p(90)=94ms     p(95)=156ms
     dropped_iterations.............: 6215    11.731672/s
   ✓ e2e_time.......................: avg=1.1s     min=284ms    med=945ms    max=23.07s   p(90)=1.64s    p(95)=2.01s
     failed_transactions............: 478     0.902291/s
     http_req_blocked...............: avg=9.56µs   min=576ns    med=2.51µs   max=219.58ms p(90)=5.09µs   p(95)=5.98µs
     http_req_connecting............: avg=3.13µs   min=0s       med=0s       max=104.03ms p(90)=0s       p(95)=0s
   ✓ http_req_duration..............: avg=370.27ms min=565.18µs med=219.2ms  max=30.09s   p(90)=877.72ms p(95)=1.13s
       { expected_response:true }...: avg=365.62ms min=1.32ms   med=219.16ms max=22.83s   p(90)=877.23ms p(95)=1.13s
     http_req_failed................: 0.01%   ✓ 478         ✗ 2980557
     http_req_receiving.............: avg=62.11µs  min=7.69µs   med=22.27µs  max=181.43ms p(90)=43.81µs  p(95)=113.99µs
     http_req_sending...............: avg=382.56µs min=3.24µs   med=9.99µs   max=275.42ms p(90)=24.6µs   p(95)=65.14µs
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=369.83ms min=524.64µs med=219.05ms max=30.08s   p(90)=877.62ms p(95)=1.13s
     http_reqs......................: 2981035 5627.115675/s
     iteration_duration.............: avg=1.11s    min=29.18ms  med=945.97ms max=31.28s   p(90)=1.64s    p(95)=2.02s
     iterations.....................: 993786  1875.908461/s
   ✓ quote_time.....................: avg=242.08ms min=51ms     med=214ms    max=9.9s     p(90)=323ms    p(95)=380ms
   ✓ success_rate...................: 99.95%  ✓ 993308      ✗ 478
   ✓ transfer_time..................: avg=795.63ms min=121ms    med=659ms    max=22.83s   p(90)=1.27s    p(95)=1.59s
     vus............................: 1       min=0         max=3134
     vus_max........................: 3259    min=1000      max=3259


=== K6 TEST SUMMARY ===
{
  "test_config": {
    "target_transactions": 1000000,
    "target_tps": 2000,
    "duration": 500,
    "fsp_pairs": [
      {
        "dest": "fsp202",
        "source": "fsp201",
        "weight": 0.25
      },
      {
        "dest": "fsp204",
        "source": "fsp203",
        "weight": 0.25
      },
      {
        "dest": "fsp206",
        "source": "fsp205",
        "weight": 0.25
      },
      {
        "dest": "fsp208",
        "source": "fsp207",
        "weight": 0.25
      }
    ]
  },
  "results": {
    "completed_transactions": 993308,
    "success_rate": 99.95190111351941,
    "actual_tps": 1986.616,
    "e2e_time_p95": 2017,
    "http_req_duration_p95": 1131.3995948999998
  },
  "status": "PASSED"
}
===================================
## Improve test
added this: discardResponseBodies: true,
and hardcoded ilpPacket and condition.

    ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 994735 / ✗ 165
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 994733 / ✗ 2
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 994724 / ✗ 9

   ✓ checks.........................: 99.99%  ✓ 2984192     ✗ 176
   ✓ completed_transactions.........: 994724  1886.623536/s
     data_received..................: 6.5 GB  12 MB/s
     data_sent......................: 2.8 GB  5.3 MB/s
   ✓ discovery_time.................: avg=58.1ms   min=1ms      med=26ms     max=8.2s     p(90)=90ms     p(95)=105ms
     dropped_iterations.............: 5101    9.67471/s
   ✓ e2e_time.......................: avg=1.07s    min=249ms    med=939ms    max=20.07s   p(90)=1.61s    p(95)=1.97s
     failed_transactions............: 176     0.333807/s
     http_req_blocked...............: avg=6.62µs   min=559ns    med=2.35µs   max=76.75ms  p(90)=4.87µs   p(95)=5.55µs
     http_req_connecting............: avg=1.98µs   min=0s       med=0s       max=67.76ms  p(90)=0s       p(95)=0s
   ✓ http_req_duration..............: avg=358.95ms min=369.11µs med=217.88ms max=30.1s    p(90)=869.32ms p(95)=1.11s
       { expected_response:true }...: avg=357.26ms min=1.27ms   med=217.87ms max=19.63s   p(90)=869.11ms p(95)=1.11s
     http_req_failed................: 0.00%   ✓ 176         ✗ 2984192
     http_req_receiving.............: avg=31.86µs  min=6.67µs   med=18.12µs  max=79.61ms  p(90)=33.85µs  p(95)=40.16µs
     http_req_sending...............: avg=93µs     min=3.12µs   med=9.44µs   max=110.19ms p(90)=20.48µs  p(95)=32.03µs
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=358.82ms min=337.09µs med=217.84ms max=30.06s   p(90)=869.27ms p(95)=1.11s
     http_reqs......................: 2984368 5660.242347/s
     iteration_duration.............: avg=1.07s    min=20.29ms  med=939.56ms max=30.44s   p(90)=1.61s    p(95)=1.97s
     iterations.....................: 994900  1886.957343/s
   ✓ quote_time.....................: avg=235.39ms min=49ms     med=212ms    max=9.41s    p(90)=318ms    p(95)=368ms
   ✓ success_rate...................: 99.98%  ✓ 994724      ✗ 176
   ✓ transfer_time..................: avg=779.6ms  min=120ms    med=662ms    max=19.63s   p(90)=1.25s    p(95)=1.57s
     vus............................: 1       min=0         max=3145
     vus_max........................: 3215    min=1000      max=3215

=== K6 TEST SUMMARY ===
{
  "test_config": {
    "target_transactions": 1000000,
    "target_tps": 2000,
    "duration": 500,
    "fsp_pairs": [
      {
        "dest": "fsp202",
        "source": "fsp201",
        "weight": 0.25
      },
      {
        "dest": "fsp204",
        "source": "fsp203",
        "weight": 0.25
      },
      {
        "dest": "fsp206",
        "source": "fsp205",
        "weight": 0.25
      },
      {
        "dest": "fsp208",
        "source": "fsp207",
        "weight": 0.25
      }
    ]
  },
  "results": {
    "completed_transactions": 994724,
    "success_rate": 99.98230977987738,
    "actual_tps": 1989.448,
    "e2e_time_p95": 1977,
    "http_req_duration_p95": 1113.7042720999996
  },
  "status": "PASSED"
}

## prepare and fulfil handler batchsize=20
     ✗ ALS_FSPIOP_GET_PARTIES_RESPONSE_IS_200
      ↳  99% — ✓ 995609 / ✗ 127
     ✗ QUOTES_FSPIOP_POST_QUOTES_RESPONSE_IS_200
      ↳  99% — ✓ 995606 / ✗ 3
     ✗ TRANSFERS_FSPIOP_POST_TRANSFERS_RESPONSE_IS_200
      ↳  99% — ✓ 995598 / ✗ 8

   ✓ checks.........................: 99.99%  ✓ 2986813     ✗ 138
   ✓ completed_transactions.........: 995598  1903.933268/s
     data_received..................: 6.5 GB  12 MB/s
     data_sent......................: 2.8 GB  5.3 MB/s
   ✓ discovery_time.................: avg=54.4ms   min=1ms      med=25ms     max=6.73s    p(90)=68ms     p(95)=99ms
     dropped_iterations.............: 4265    8.156179/s
   ✓ e2e_time.......................: avg=1.01s    min=268ms    med=884ms    max=20.34s   p(90)=1.49s    p(95)=1.88s
     failed_transactions............: 138     0.263904/s
     http_req_blocked...............: avg=6.85µs   min=547ns    med=2.35µs   max=100.87ms p(90)=4.93µs   p(95)=5.66µs
     http_req_connecting............: avg=1.93µs   min=0s       med=0s       max=56.27ms  p(90)=0s       p(95)=0s
   ✓ http_req_duration..............: avg=339.99ms min=724.72µs med=215.14ms max=30.05s   p(90)=798.06ms p(95)=1.03s
       { expected_response:true }...: avg=338.7ms  min=1.18ms   med=215.13ms max=19.21s   p(90)=797.91ms p(95)=1.03s
     http_req_failed................: 0.00%   ✓ 138         ✗ 2986813
     http_req_receiving.............: avg=38.85µs  min=6.24µs   med=18.3µs   max=57.73ms  p(90)=34.5µs   p(95)=43.39µs
     http_req_sending...............: avg=126.78µs min=3.23µs   med=9.41µs   max=142.1ms  p(90)=20.92µs  p(95)=37.55µs
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=339.83ms min=687.36µs med=215.08ms max=30.05s   p(90)=797.98ms p(95)=1.03s
     http_reqs......................: 2986951 5712.100042/s
     iteration_duration.............: avg=1.02s    min=23.97ms  med=884.34ms max=30.36s   p(90)=1.49s    p(95)=1.89s
     iterations.....................: 995736  1904.197172/s
   ✓ quote_time.....................: avg=227.54ms min=52ms     med=209ms    max=7.4s     p(90)=311ms    p(95)=359ms
   ✓ success_rate...................: 99.98%  ✓ 995598      ✗ 138
   ✓ transfer_time..................: avg=735.02ms min=129ms    med=616ms    max=19.21s   p(90)=1.14s    p(95)=1.47s
     vus............................: 1       min=0         max=2745
     vus_max........................: 2879    min=1000      max=2879
     === K6 TEST SUMMARY ===
{
  "test_config": {
    "target_transactions": 1000000,
    "target_tps": 2000,
    "duration": 500,
    "fsp_pairs": [
      {
        "dest": "fsp202",
        "source": "fsp201",
        "weight": 0.25
      },
      {
        "dest": "fsp204",
        "source": "fsp203",
        "weight": 0.25
      },
      {
        "dest": "fsp206",
        "source": "fsp205",
        "weight": 0.25
      },
      {
        "dest": "fsp208",
        "source": "fsp207",
        "weight": 0.25
      }
    ]
  },
  "results": {
    "completed_transactions": 995598,
    "success_rate": 99.98614090481814,
    "actual_tps": 1991.196,
    "e2e_time_p95": 1889,
    "http_req_duration_p95": 1037.748395
  },
  "status": "PASSED"
}